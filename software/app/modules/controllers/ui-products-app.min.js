var app = angular.module('app', ['ui.router']);

app.config(function($stateProvider, $urlRouterProvider) {
	//$urlRouterProvider.otherwise('/home');
    $urlRouterProvider.otherwise(function($injector, $location){
      $injector.invoke(['$state', function($state) {
        $state.go('home');
      }]);
    }); 
	
	$stateProvider
	.state('home', {
        url: '/home',
        templateUrl: 'software/views/home.html',
        controller : 'home'
    })
	.state('software', {
        url: '/software',
        templateUrl: 'software/views/software.html',
        controller : 'software'
    })
	.state('inprogress', {
        url: '/inprogress',
        templateUrl: 'software/views/inprogress.html',
        controller : 'inprogress'
    })
	.state('categories', {
        url: '/categories',
        templateUrl: 'software/views/categories.html',
        controller : 'categories'
    })
	.state('contactus', {
        url: '/contactus',
        templateUrl: 'software/views/contactus.html',
        controller : 'contactus'
    })
	.state('search', {
        url: '/search',
        templateUrl: 'software/views/search.html'
    })

	.state('product/:id', {
        url: '/product/:id/:title',
        templateUrl: 'software/views/single-product.html',
        controller : 'singleproduct'
    })

    .state('notfound', {
        url: '/notfound',
        templateUrl: 'software/views/notfound.html'
    })
});
app.run(['$rootScope', 'Products', function($rscp, p){
	$rscp.imgUrl = p.getImgUrl();
}])
.directive('loaderimg', function($timeout) {
    return {
        restrict:'A',
        scope: {},
        link: function(scope, elem, attrs) {
            $timeout(function(){ elem.attr('src', attrs.llSrc) });
        },
    };
});

app.filter('to_trusted', ['$sce', function($sce) {
  return function(text) {
    return $sce.trustAsHtml(text);
  };
}]);
